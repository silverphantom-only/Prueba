<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generador de P√°ginas para Taller Mec√°nico</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background: #eef2f7;
}
.panel {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    margin-bottom: 20px;
}
input, textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #d0d7e2;
    border-radius: 8px;
    margin-top: 5px;
}
.btn {
    display: inline-block;
    background: #f8c300;
    padding: 10px 16px;
    border-radius: 8px;
    color: #1a1a1a;
    text-decoration: none;
    cursor: pointer;
    margin-top: 10px;
    font-weight: bold;
}
.btn.secondary {
    background: #555;
    color: white;
}
iframe {
    width: 100%;
    height: 420px;
    border: 1px solid #d0d7e2;
    border-radius: 10px;
    background: white;
}
textarea#htmlCodeBox {
    height: 260px;
    white-space: pre;
    font-family: monospace;
}
</style>
</head>

<body>

<h1 style="text-align:center; color:#1a1a1a;">Generador de P√°gina Web ‚Äî Taller Mec√°nico</h1>

<!-- PANEL -->
<div class="panel">
    <label>Nombre del taller</label>
    <input id="bizName">

    <label>Slogan</label>
    <input id="slogan">

    <label>Descripci√≥n</label>
    <textarea id="desc"></textarea>

    <label>URL de imagen principal</label>
    <input id="heroImg">

    <label>Servicios (1 por l√≠nea: nombre | precio | descripci√≥n | emoji)</label>
    <textarea id="services" placeholder="Ej:
Afinaci√≥n Mayor | $900 | Servicio completo | üîß
Cambio de Aceite | $350 | Aceite + filtro | üõ¢Ô∏è
Frenos | $250 | Revisi√≥n y ajuste | üöó
Escaneo Automotriz | $400 | Diagn√≥stico electr√≥nico | üíª"></textarea>

    <label>WhatsApp (solo n√∫meros)</label>
    <input id="wa">

    <label>Tel√©fono</label>
    <input id="tel">

    <label>Direcci√≥n</label>
    <textarea id="addr"></textarea>

    <button class="btn" onclick="updatePreview()">Actualizar Vista Previa</button>
</div>

<!-- PREVIEW -->
<h2>Vista previa</h2>
<iframe id="preview"></iframe>

<!-- HTML -->
<h2>C√≥digo HTML generado</h2>
<textarea id="htmlCodeBox"></textarea>
<br>

<button class="btn secondary" onclick="updateHtmlBox()">Actualizar HTML</button>
<button class="btn" onclick="copyHtml()">Copiar HTML</button>

<script>
function generateFinalHtml() {
    const name = bizName.value;
    const slogan = document.getElementById("slogan").value;
    const descText = document.getElementById("desc").value;
    const hero = heroImg.value;
    const wa = document.getElementById("wa").value;
    const telVal = document.getElementById("tel").value;
    const addrVal = document.getElementById("addr").value;

    let servicesRaw = document.getElementById("services").value.trim().split("\n");

    let serviceHtml = "";

    servicesRaw.forEach(line => {
        let p = line.split("|").map(x => x.trim());
        if (p.length === 4) {
            let [title, price, desc, emoji] = p;
            serviceHtml += `
<div style="background:white; padding:14px; border-radius:10px; border:1px solid #d0d7e2; margin-bottom:12px;">
    <div style="display:flex; gap:14px;">
        <div style="font-size:34px">${emoji}</div>
        <div style="flex:1;">
            <div style="display:flex;">
                <strong>${title}</strong>
                <span style="margin-left:auto; color:#f8c300; font-weight:bold;">${price}</span>
            </div>
            <p>${desc}</p>
            <a class="btn" style="background:#25D366; color:white;" href="https://wa.me/${wa}?text=Hola, quiero informaci√≥n sobre ${encodeURIComponent(title)}" target="_blank">üí¨ Consultar</a>
            <a class="btn" href="https://wa.me/${wa}?text=Hola, quiero agendar el servicio de ${encodeURIComponent(title)} (${price})" target="_blank">üìÖ Reservar</a>
        </div>
    </div>
</div>
`;
        }
    });

    return `
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>${name}</title>
<style>
body { font-family: Arial; margin:0; background:#f2f2f7; }
.header { padding:20px; background:#1a1a1a; color:#f8c300; font-size:26px; font-weight:bold; }
.container { max-width:1000px; margin:0 auto; padding:20px; }
.hero { display:flex; gap:20px; margin-top:20px; }
.hero img { width:300px; border-radius:12px; object-fit:cover; }
.btn { padding:10px 14px; border-radius:8px; text-decoration:none; color:white; background:#f8c300; font-weight:bold; }
.green { background:#25D366; }
footer { text-align:center; margin-top:40px; color:#666; padding:20px; }
</style>
</head>

<body>
<div class="header">${name}</div>

<div class="container">
    <div class="hero">
        <div>
            <h2>${slogan}</h2>
            <p>${descText}</p>
        </div>
        <img src="${hero}">
    </div>

    <h2>Servicios</h2>
    ${serviceHtml}

    <h2>Contacto</h2>
    <p>${addrVal}</p>

    <a class="btn" style="background:#f8c300; color:#1a1a1a;" href="tel:${telVal}">üìû Llamar</a>
    <a class="btn green" href="https://wa.me/${wa}" target="_blank">üí¨ WhatsApp</a>
</div>

<footer>¬© ${new Date().getFullYear()} ${name} ‚Äî Todos los derechos reservados</footer>

</body>
</html>`;
}

function updatePreview() {
    const iframe = document.getElementById("preview");
    const html = generateFinalHtml();
    iframe.srcdoc = html;
    updateHtmlBox();
}

function updateHtmlBox() {
    document.getElementById("htmlCodeBox").value = generateFinalHtml();
}

function copyHtml() {
    const box = document.getElementById("htmlCodeBox");
    box.select();
    document.execCommand("copy");
    alert("HTML copiado ‚úîÔ∏è");
}
</script>

</body>
</html>
